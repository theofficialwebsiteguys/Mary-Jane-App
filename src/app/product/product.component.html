<div
  class="product-card"
  (click)="updateProductDisplay()"
  role="button"
  [attr.aria-label]="'View details for ' + product.title"
>
  <!-- Image -->
  <div class="image-wrapper">
    <img [src]="getProductImage(product)" [alt]="product.title + ' image'" />

    <!-- Bundle Tag -->
    <div class="bundle-tag" *ngIf="product['isBundle']">
      BUNDLE
    </div>

    <!-- Sale Tag -->
    <div class="sale-tag" *ngIf="product.sale">
      {{ (product.sale.discountValue * 100) | number:'1.0-0' }}% OFF
    </div>
  </div>

  <!-- Content -->
  <div class="card-body">

    <p class="category">{{ product.category }}</p>
    <p class="brand">{{ product.brand }}</p>

    <div class="strain-pill" [ngClass]="product.strainType">
      {{ product.strainType || '-' | uppercase }}
    </div>

    <h2 class="title">
      {{ product.title }}
    </h2>

    <p class="thc">
      {{ product.thc }} THC
    </p>

    <div class="price-row">
      <div class="price-block" *ngIf="product.sale; else regularPrice">
        <span class="price-old">{{ product.price | currency }}</span>
        <span class="price-sale">{{ product.sale.discountedPrice | currency }}</span>
        <!-- <span class="weight"> / {{ product.weight }}</span> -->
      </div>

      <ng-template #regularPrice>
        <span class="price">{{ product.price | currency }}</span>
        <!-- <span class="weight"> / {{ product.weight }}</span> -->
      </ng-template>

      <button
        *ngIf="isLoggedIn"
        class="add-btn"
        (click)="addToCart($event)"
      >
        +
      </button>
    </div>
  </div>
</div>
