<app-header></app-header>

<ion-content fullscreen>

  <!-- LOGGED IN -->
  <div *ngIf="isLoggedIn; else guestContent" class="rewards-page">
    <h1 id="user-dashboard-heading" class="sr-only">User Dashboard</h1>

    <!-- POINTS SUMMARY -->
    <section class="rewards-section">
      <app-points
        [points]="user.points"
        [isExclusiveMember]="user.premium"
        aria-label="Your reward points and membership status"
      ></app-points>
    </section>

    <!-- PROMOS -->
    <section class="rewards-section">
      <app-banner-carousel aria-label="Promotional banners carousel"></app-banner-carousel>
    </section>


    <!-- AIQ TIERS -->
    <section class="rewards-section">
      <app-aiq-tiers
        [userPoints]="user.points"
        [discounts]="discounts"
        aria-label="Available loyalty reward tiers"
      ></app-aiq-tiers>
    </section>

    <!-- ACCOUNT -->
    <section class="rewards-section">
      <app-account
        [user]="user"
        aria-label="Account settings"
      ></app-account>
    </section>

    <!-- REVIEW -->
    <!-- <section class="rewards-section">
      <app-review aria-label="Leave a review"></app-review>
    </section> -->

    <!-- ADVANCED -->
    <section class="rewards-section advanced">
      <ion-item lines="none" (click)="showAdvanced = !showAdvanced">
        <ion-label>Advanced</ion-label>
        <ion-icon slot="end" name="chevron-down-outline"></ion-icon>
      </ion-item>

      <ion-button
        *ngIf="showAdvanced"
        expand="block"
        class="danger-btn"
        (click)="presentDeleteModal()"
      >
        Delete My Account
      </ion-button>
    </section>
  </div>

  <!-- GUEST -->
  <ng-template #guestContent>
    <app-guest aria-label="Guest content. Please log in to access your dashboard."></app-guest>
  </ng-template>

</ion-content>
